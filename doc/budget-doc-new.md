TASK:
Выполнить полный рефактор и расширение функционала для Budget и Debt модулей. 
Все изменения должны быть согласованы с Finance и Goal модулями, включая связи, синхронизацию и валютные зависимости.

-----------------------------------------------------------------------
1. BUDGET DETAILS PAGE (новая страница/модал)
-----------------------------------------------------------------------
Создать новый экран: **budget-details** (по структуре аналогичен goal-details).

ДОЛЖНО БЫТЬ ВКЛЮЧЕНО:
- Информация о бюджете:
    • название бюджета
    • описание (если есть)
    • дата создания / обновления
    • сумма, лимит, текущий баланс
    • валюта бюджета
- Интеграции:
    • к какому Goal привязан (goalId)
    • какие компоненты и модалы работают с данным бюджетом
    • где используется данный budgetId (value add, finance forms и т.п.)
- Value Add детализация:
    • какой account используется
    • какая валюта account-а
    • в какой валюте выполняется добавление значения
- More Menu (dropdown):
    • Edit Budget
    • Delete Budget
    • View Linked Goal
    • View Transactions (если есть)

ТРЕБОВАНИЯ:
- Визуально и логически — как goal-details.
- Использовать router modal (не обычный modal).
- Поддержка всех операций внутри страницы.
- Все строки — через локализацию (t("finance.budget.*")).

-----------------------------------------------------------------------
2. MAIN BUDGET LIST (главный экран Budget)
-----------------------------------------------------------------------
ПЕРЕДЕЛАТЬ расчет суммы:

СЕЙЧАС:
Сумма неверная, не учитывает currency конвертацию.

ДОЛЖНО БЫТЬ:
- Budget сумма должна конвертироваться так же, как в остальных Finance вкладках.
- Для каждого бюджета учитывать:
    • currency бюджета
    • глобальная активная валюта приложения
- Использовать единую currency conversion функцию.

-----------------------------------------------------------------------
3. СВЯЗЬ GOAL ↔ BUDGET (двухсторонняя синхронизация)
-----------------------------------------------------------------------
ПРАВИЛА СИНХРОНИЗАЦИИ:

A) При создании Goal:
- Если пользователь выбирает Budget:
    → goal.currency автоматически = budget.currency
    → поля блокируются от ручного изменения
    → синхронизация включается

B) При добавлении значения в Budget:
    → сумма автоматически добавляется в Goal (если привязаны)

C) При добавлении значения в Goal:
    → сумма автоматически добавляется в Budget (если привязаны)

ТРЕБОВАНИЯ:
- Никаких расхождений.
- Операции атомарные.
- Ошибки синка показывать через локализацию.

-----------------------------------------------------------------------
4. DEBT MODULE — исправления и новый details modal
-----------------------------------------------------------------------
СЕЙЧАС:
При клике на debt открывается edit modal — это неверно.

ДОЛЖНО БЫТЬ:
Создать **debt-details modal/page**, аналогичный budget-details.

В НЕМ ДОЛЖНЫ РАБОТАТЬ:
- Полный просмотр информации о долге
- Кнопки действий:
    • Частичное погашение (partial payment)
    • Полное погашение
    • Редактирование
    • Удаление
- Вся логика debt должна работать именно отсюда.

ТРЕБОВАНИЯ:
- Edit modal НЕ должен открываться при клике на карточку.
- Все действия запускаются из кнопок в debt-details.

-----------------------------------------------------------------------
5. DEBT — синхронизация доходов/расходов по персоналиям
-----------------------------------------------------------------------
Персоналии (persons) в долгах должны синхронизироваться:

ПРАВИЛО:
- При изменении debt данных:
    → обновлять связанные записи income/outcome соответствующего person.
- При погашении:
    → корректировать балансы person.
- При частичном платеже:
    → синхронизация только разницы (delta).

-----------------------------------------------------------------------
6. DEBT & TRANSACTION LINK
-----------------------------------------------------------------------
ПРАВИЛО:
Если debt связан с transaction (transactionId существует):
- debt-details НЕ должен открываться напрямую
- Вместо этого должно открываться:
    → transaction-details
- debt-details может быть открыт только если transaction не открыт.

Логика:
if (debt.transactionId)
    open(transaction-details)
else
    open(debt-details)

-----------------------------------------------------------------------
ГЛОБАЛЬНЫЕ ТРЕБОВАНИЯ:
-----------------------------------------------------------------------
- Полная локализация:
    • t("finance.budget.*")
    • t("finance.debt.*")
- Никаких хардкодов текста.
- Строгая типизация.
- Везде использовать router modal, не обычные модалки.
- Обновить навигацию, ссылки и историю.
- Синк операций должен быть атомарным и последовательным.

GOAL:
Полностью переработать Budget и Debt модули так, чтобы:
- работали корректные связи
- суммы всегда совпадали
- действия выполнялись из detail pages
- синхронизация была двухсторонняя
- UI соответствовал логике всего Finance модуля.
