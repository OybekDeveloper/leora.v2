# Задачи: Платформа, HOME, MORE, FX (LEORA Spec v1.2)

## 1. HOME-дэшборд (§10)
- Построить живой экран «Сегодня» с виджетами задач/привычек/фокуса, краткой финсводкой и карточками INSIGHTS.
- Добавить быстрые действия `+Расход`, `+Задача`, `Фокус`, `Голос` и индикатор онлайн/офлайн состояния.
- Источник данных — агрегаты Planner/Finance/Insights, а не статические снапшоты.

## 2. Модуль MORE (§3–4)
- Настройки региона: базовая валюта отчётов, `weekPattern`, `fx_provider`, ручные курсы с приоритетом, выбор языков (RU, UZ, EN, TR, AR).
- Профиль: имя, часовой пояс, локаль. Управление согласием на ChatGPT и анонимную телеметрию (по умолчанию off).
- Связать выбор региона с Planner (рабочая неделя/первый день) и Finance (курсы, базовая валюта).

## 3. FX и провайдеры (§12)
- Реализовать `RateProvider` с поддержкой провайдеров (центробанк, рыночный API, ручные значения) и правилом «manual override > provider».
- Хранить `FxRate {date, fromCurrency, toCurrency, rate, source, isOverridden}` в локальной БД, предоставлять историю и API `getRate/overrideRate`.
- Исключить задний пересчёт исторических операций; пересчитывать только при явной команде «пересчитать период» (опционально).

## 4. Инфраструктура интеграций (§11)
- Построить Event Bus (персистентный), Command Dispatcher, Orchestrator, Projection Engine, Notifications Manager, Calendar Projector.
- Стандартизировать конверт событий/команд (`eventId/commandId`, `version`, `correlationId/causationId`, `idempotencyKey`).
- Синхронизировать с `AiGateway`, Voice и внешними сервисами через слой Integration.

## 5. Тест-план и миграции (§17–18)
- Определить критерии приёмки для ключевых модулей, сценарии офлайн/онлайн, нагрузочные и UX-тесты.
- Подготовить стратегию миграций и feature flag для включения GPT‑функций и отката.
