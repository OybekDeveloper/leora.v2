## üìù –ß–ê–°–¢–¨ 1. LEORA ‚Äî GPT Analyzer Integration v1.0 ‚Äî **–ü–ê–¢–ß –ö –¢–ï–ö–£–©–ï–ô –†–ï–ê–õ–ò–ó–ê–¶–ò–ò**

````markdown
# ü§ñ LEORA ‚Äî GPT Analyzer Integration v1.0 ‚Äî –ü–ê–¢–ß –ö –¢–ï–ö–£–©–ï–ô –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

–≠—Ç–æ—Ç –ø–∞—Ç—á –¥–æ–ø–æ–ª–Ω—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥—É–ª–∏ (PLANNER, INSIGHTS, FINANCE, HOME, MORE),
–≤—Å—Ç—Ä–∞–∏–≤–∞—è GPT –∫–∞–∫ **–∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∏ —Å–æ–≤–µ—Ç—É—é—â–∏–π —Å–ª–æ–π** (Insight/Advisor Engine).
–ù–µ –ª–æ–º–∞–µ–º —Ç–µ–∫—É—â–∏–π UX/–Ω–∞–≤–∏–≥–∞—Ü–∏—é ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º *—Å–≤—è–∑–Ω–æ—Å—Ç—å, –¥–µ–π—Å—Ç–≤–∏—è –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å*.

---

## 0. –¶–µ–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç –º–∏—Ä–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è)
- –î–µ–π—Å—Ç–≤–∏–µ, –∞ –Ω–µ –ª–µ–∫—Ü–∏—è: –∫–∞–∂–¥–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ = **1 –ø–æ–Ω—è—Ç–Ω–∞—è CTA**.
- –°–≤—è–∑–Ω–æ—Å—Ç—å: **—Ü–µ–ª–∏ ‚Üî –∑–∞–¥–∞—á–∏ ‚Üî –ø—Ä–∏–≤—ã—á–∫–∏ ‚Üî —Ñ–∏–Ω–∞–Ω—Å—ã ‚Üî –∏–Ω—Å–∞–π—Ç—ã**.
- –û—Ñ—Ñ–ª–∞–π–Ω‚Äë–ø–µ—Ä–≤—ã–π, –ø—Ä–∏–≤–∞—Ç–Ω—ã–π; GPT –ø–æ–ª—É—á–∞–µ—Ç **–∞–≥—Ä–µ–≥–∞—Ç—ã**, –Ω–µ ¬´—Å—ã—Ä—ã–µ¬ª PII.
- 5 —è–∑—ã–∫–æ–≤ (EN/RU/UZ/TR/AR —Å RTL), —Å—Ç—Ä–æ–≥–∏–π i18n –ø–æ –∫–ª—é—á–∞–º.
- –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞: p95 UI < 150‚ÄØ–º—Å (–ø–æ—Å–ª–µ –∫–µ—à–∞), ¬´CTA acted %¬ª —Ä–∞—Å—Ç—ë—Ç —Å–ø—Ä–∏–Ω—Ç‚Äë–∫‚Äë—Å–ø—Ä–∏–Ω—Ç—É.

---

## 1. –ì–¥–µ –≤—ã–∑—ã–≤–∞–µ–º GPT (–ø–æ—Ç–æ–∫–∏)
- **Daily Overview (—É—Ç—Ä–æ/–ø–µ—Ä–≤—ã–π –≤—Ö–æ–¥):** –≥–ª–∞–≤–Ω—ã–π –∏–Ω—Å–∞–π—Ç –¥–Ω—è + 2‚Äì4 –¥–æ–ø., 1‚Äì3 –≤–æ–ø—Ä–æ—Å–∞.
- **Event triggers:** –∫—Ä—É–ø–Ω–∞—è —Ç—Ä–∞—Ç–∞/–∞–Ω–æ–º–∞–ª–∏—è –±—é–¥–∂–µ—Ç–∞, –ø—Ä–æ—Å—Ä–æ—á–∫–∞ IOU, –ø—Ä–æ–≤–∞–ª/—É—Å–ø–µ—Ö –ø—Ä–∏–≤—ã—á–∫–∏, –æ–∫–æ–Ω—á–∞–Ω–∏–µ —Ñ–æ–∫—É—Å‚Äë—Å–µ—Å—Å–∏–∏, –∑–∞–≤–∞–ª –∑–∞–¥–∞—á.
- **Weekly/Monthly review:** –æ–±–æ–±—â–∞—é—â–∏–µ –∏–Ω—Å–∞–π—Ç—ã, –º–∏–Ω–∏‚Äë–ø–ª–∞–Ω –æ—Ç ¬´—Å–æ–≤–µ—Ç–Ω–∏–∫–∞¬ª.

> –í—Å–µ —Ç—Ä–∏ –ø–æ—Ç–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç I/O, —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ ¬´user‚Äëprompt template¬ª –∏ –æ–±—ä—ë–º–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞–Ω—Ç–∞–π–º–∞
- **Client Aggregator (App):** —Å–æ–±–∏—Ä–∞–µ—Ç *—Å–∂–∞—Ç—ã–µ —Å–Ω–∞–ø—à–æ—Ç—ã* –∏–∑ PLANNER/FINANCE/Activity/History.
- **aiAdapter (App/Server):** 
  - –º–∞—Å–∫–∏—Ä—É–µ—Ç PII, —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç input,
  - –≤—ã–∑—ã–≤–∞–µ—Ç –º–æ–¥–µ–ª—å, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç JSON –æ—Ç–≤–µ—Ç –ø–æ —Å—Ö–µ–º–µ,
  - –∫–µ—à–∏—Ä—É–µ—Ç –¥–Ω–µ–≤–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –¥–µ–ª–∞–µ—Ç backoff/retry.
- **Fallback Engine (–ª–æ–∫–∞–ª—å–Ω–æ):** –µ—Å–ª–∏ GPT –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî –ø—Ä–æ—Å—Ç—ã–µ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏ ‚Üí 1‚Äì2 –ø–æ–¥—Å–∫–∞–∑–∫–∏ –±–µ–∑ ¬´—Å–æ–≤–µ—Ç–Ω–∏–∫–æ–≤¬ª.

---

## 3. –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–∞–Ω–Ω—ã—Ö (–º–∏–Ω–∏–º—É–º)

### 3.1. –í—Ö–æ–¥ –≤ GPT (InputSnapshot, –∞–≥—Ä–µ–≥–∞—Ç—ã)
```json
{
  "meta": { "locale": "ru-RU", "rtl": false, "tz": "Asia/Tashkent", "today": "2025-11-15", "app_version": "x.y.z" },
  "flags": { "ai_mode": "moderate", "privacy_mode": true, "ab_bucket": "insight_v2" },

  "planner": {
    "tasks": [{ "id":"t1","title":"Call client","date":"2025-11-15","time":"15:00","status":"planned","priority":"high","energy":2,"goalId":"g1" }],
    "habits": [{ "id":"h1","title":"10k steps","streak":12,"linkedGoalIds":["g2"] }],
    "goals":  [{ "id":"g1","title":"Launch feature","type":"professional","progress":0.42 }]
  },

  "finance": {
    "budgets": [{ "id":"b1","cat":"Dining","limit":1000000,"spent_mtd":200000,"currency":"UZS" }],
    "txns_sample": [{ "dt":"2025-11-13","amount":-120000,"currency":"UZS","cat":"Dining" }],
    "iou": [{ "id":"i1","name_alias":"Aziz","amount":500000,"currency":"UZS","due":"2025-11-28","status":"active" }]
  },

  "activity": { "steps_today": 3200, "health_linked": true },

  "history": {
    "insights_recent": [{ "id":"ins1","type":"finance","acted":true }],
    "questions_recent": [{ "id":"q1","answered":true }]
  }
}
````

### 3.2. –í—ã—Ö–æ–¥ –∏–∑ GPT (OutputPayload, **—Ç–æ–ª—å–∫–æ i18n‚Äë–∫–ª—é—á–∏**)

```json
{
  "indexes": {
    "personalPerformance": 7.6, "financialHealth": 6.8, "productivity": 7.9,
    "workLifeBalance": 6.1, "discipline": 6.9, "achievingGoals": 7.2
  },
  "main_insight": {
    "type": "finance",
    "title_key": "insights.main.dinners_over.title",
    "description_key": "insights.main.dinners_over.desc",
    "severity": "warning",
    "cta": {
      "type": "create_rule",
      "label_key": "insights.main.dinners_over.cta",
      "payload": { "targetView":"finance_budgets", "suggestedValue":"80000 UZS/day" }
    }
  },
  "secondary_insights": [
    {
      "type":"habit",
      "title_key":"insights.habit.steps_low.title",
      "description_key":"insights.habit.steps_low.desc",
      "severity":"info",
      "cta":{ "type":"create_habit","label_key":"insights.habit.steps_low.cta","payload":{"habitId":null,"suggestedValue":10000} }
    }
  ],
  "questions": [
    {
      "id":"q_steps_barrier",
      "text_key":"questions.steps_barrier.text",
      "choices":[
        {"id":"no_time","label_key":"questions.steps_barrier.no_time"},
        {"id":"forget","label_key":"questions.steps_barrier.forget"},
        {"id":"no_value","label_key":"questions.steps_barrier.no_value"}
      ],
      "allowFreeText": true,
      "contextKey": "activity_barrier"
    }
  ],
  "advice":[{ "advisor":"stoic", "plan":[{"key":"advice.stoic.step1"},{"key":"advice.stoic.step2"}] }]
}
```

**CTA types (–∂—ë—Å—Ç–∫–æ):**
`open_view | create/update_budget | create/update_rule | create/update_task | reschedule_tasks | create/update_habit | adjust_goal | adjust_iou`

---

## 4. –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ –ø–æ –º–æ–¥—É–ª—è–º

### 4.1 INSIGHTS

* –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç `main_insight` –∫—Ä—É–ø–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–æ–π (1 CTA), –¥–∞–ª–µ–µ `secondary_insights`.
* –ë–ª–æ–∫ ¬´–í–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è¬ª (1‚Äì3), –æ—Ç–≤–µ—Ç—ã ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç.
* –≠–∫—Ä–∞–Ω ¬´–ò—Å—Ç–æ—Ä–∏—è –∏–Ω—Å–∞–π—Ç–æ–≤¬ª: acted/dismissed/read + —Ñ–∏–ª—å—Ç—Ä—ã.

### 4.2 PLANNER

* –ü–æ—Å–ª–µ Focus‚Äë—Å–µ—Å—Å–∏–∏ ‚Üí event trigger –≤ GPT ‚Üí –≤–æ–∑–º–æ–∂–Ω—ã–π –∏–Ω—Å–∞–π—Ç: ¬´–∑–∞–∫—Ä—ã—Ç—å/–ø–µ—Ä–µ–Ω–µ—Å—Ç–∏¬ª.
* Add Task/Habit/Goal —Ñ–æ—Ä–º—ã: AI‚Äë–±–ª–æ–∫ ¬´–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏¬ª.
* –°–≤—è–∑–∏ `task.goalId`, `habit.linkedGoalIds[]` ‚Äî –≤—ã–≤–æ–¥–∏–º –±–µ–π–¥–∂–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö.

### 4.3 FINANCE

* –ê–Ω–æ–º–∞–ª–∏–∏/–ø–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥ ‚Üí –∏–Ω—Å–∞–π—Ç—ã —Å CTA: —Å–æ–∑–¥–∞—Ç—å –ª–∏–º–∏—Ç/–ø—Ä–∞–≤–∏–ª–æ, –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ IOU.
* –ë—é–¥–∂–µ—Ç—ã —Å rollover, IOU —Å –º—è–≥–∫–æ–π —Ä–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–µ–π ‚Äî –≤—Å—ë –¥–æ—Å—Ç—É–ø–Ω–æ –≤ CTA.

### 4.4 HOME

* –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ —Ä–µ–∑—é–º–µ (2‚Äì3 —Å—Ç—Ä–æ–∫–∏) + quick‚Äëactions (log expense / add task / mark habit / start focus).

---

## 5. –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å/—Å—Ç–æ–∏–º–æ—Å—Ç—å/–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å

* **PII** –º–∞—Å–∫–∏—Ä—É–µ–º (–∏–º–µ–Ω–∞ ‚Üí –ø—Å–µ–≤–¥–æ–Ω–∏–º—ã), –ø–µ—Ä–µ–¥–∞—ë–º –∞–≥—Ä–µ–≥–∞—Ç—ã.
* **Rate‚Äëlimits:** –Ω–µ –±–æ–ª–µ–µ X –≤—ã–∑–æ–≤–æ–≤/—Å—É—Ç–∫–∏/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (daily + 2 —Å–æ–±—ã—Ç–∏—è).
* **–ö–µ—à:** –¥–Ω–µ–≤–Ω–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç; –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º.
* **Fallback:** —ç–≤—Ä–∏—Å—Ç–∏–∫–∏ (–±–µ–∑ GPT) –Ω–∞ —Å–ª—É—á–∞–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.
* **–õ–æ–≥–∏:** –±–µ–∑ PII, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤ MORE; —Ö—Ä–∞–Ω–µ–Ω–∏–µ ‚Äî –º–∏–Ω–∏–º—É–º –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏.

---

## 6. i18n (EN/RU/UZ/TR/AR)

* –ú–æ–¥–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –∫–ª—é—á–∏**, —Ç–µ–∫—Å—Ç—ã ‚Äî –∏–∑ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏.
* RTL (AR) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤–∏–∑—É–∞–ª—å–Ω–æ; —á–∏—Å–ª–æ–≤—ã–µ/–≤–∞–ª—é—Ç–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–µ (–≤ —Ç.—á. UZS).

---

## 7. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (–º–∏–Ω–∏–º—É–º)

* `insight_shown`, `insight_cta_clicked`, `question_answered`
* `planner_task_created|completed|moved`, `planner_focus_started|finished`
* `finance_tx_added`, `budget_rule_created`, `iou_rescheduled`
* –í—Å–µ —Å–æ–±—ã—Ç–∏—è: `{ locale, tz, app_version, ab_flag }`, –±–µ–∑ PII.

---

## 8. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

* p95: —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ UI –±–ª–æ–∫–∞ –∏–Ω—Å–∞–π—Ç–æ–≤ ‚â§100‚ÄØ–º—Å (–ø–æ—Å–ª–µ –∫–µ—à–∞).
* –û–¥–∏–Ω –≤—ã–∑–æ–≤ –º–æ–¥–µ–ª–∏ (–±–µ–∑ –∫–µ—à–∞) ‚Äî –±—é–¥–∂–µ—Ç ‚â§ 600‚Äì800‚ÄØ–º—Å –Ω–∞ –æ—Ç–≤–µ—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–æ–¥–µ–ª–∏/—Å–µ—Ç–∏).
* –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤, –º–µ–º–æ‚Äë—Å–µ–ª–µ–∫—Ç–æ—Ä—ã, –±–∞—Ç—á‚Äë–∞–ø–¥–µ–π—Ç—ã.

---

## 9. Definition of Done (ship‚Äë–±–ª–æ–∫–µ—Ä—ã)

* [ ] –ö–æ–Ω—Ç—Ä–∞–∫—Ç I/O –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –≤ JSON‚Äë—Å—Ö–µ–º–µ, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è —Ä–∞–Ω—Ç–∞–π–º–æ–º.
* [ ] –í—Å–µ CTA –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã –∏ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –¥–µ–π—Å—Ç–≤–∏—é/–Ω–∞–≤–∏–≥–∞—Ü–∏–∏.
* [ ] –§–æ–ª–ª–±–µ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–µ GPT —Ä–∞–±–æ—Ç–∞–µ—Ç, UX –Ω–µ —Å—ã–ø–µ—Ç—Å—è.
* [ ] –ù–æ–≤—ã–µ —Ç–µ–∫—Å—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ i18n (EN/RU/UZ/TR/AR); RTL –æ–∫.
* [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ (–º–æ–∫–∏/—Å—Ç–∞–±—ã).
* [ ] p95 –º–µ—Ç—Ä–∏–∫–∏ –≤ –±—é–¥–∂–µ—Ç–µ; —Ç–µ—Å—Ç—ã (unit/E2E) –∑–µ–ª—ë–Ω—ã–µ.

````

---
